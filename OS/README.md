# 👨🏻‍💻 운영체제

## 운영체제란?
운영체제는 컴퓨터 시스템의 **자원들을 효율적으로 관리**하며, 사용자가 컴퓨터를 보다 편리하게 사용할 수 있도록 도와주는 **소프트웨어**이다.

# 💫 프로세스와 스레드
## 프로세스
프로세스(Process): 현재 실행중인 프로그램을 의미한다. 또한, 메모리에 적재되어 있으며 CPU를 할당받을 수 있다.

### 프로세스의 구성요소
- **코드(Code)**  
  실행할 프로그램의 코드가 저장됨  
  컴파일 시 크기가 결정  
  
- **데이터(Data)**  
  **전역변수, 정적(static)변수, 정적 배열** 등 **컴파일 시 크기가 결정되는 것**들의 영역  
  컴파일 시 크기가 결정  
  
- **힙(Heap)**  
  **동적으로 할당된 객체**를 위한 영역  
  런타임 시 크기가 결정  

- **스택(Stack)**  
  **지역변수, 매개변수, 리턴값** 등 주로 함수호출을 위한 영역  
  런타임 시 크기가 결정  
  <br>
  
### 프로세스의 상태
<img src="https://user-images.githubusercontent.com/34755287/70577651-11eb7a00-1bef-11ea-9866-0c659728be9e.png" width="900" height="300">  

상태 | 설명
---- | ----
**new** | 프로세스가 새롭게 생성된 상태. 생성 후 Job Queue로 들어가 **메모리 할당을 기다림**
**ready** | 메모리를 할당 받은 후, ready queue에서 **CPU할당을 기다리는 상태**  
**running** | **cpu를 할당 받아** 실행되고 있는 상태
**waiting** | I/O작업으로 인해 blocked 된 상태
**terminated** | 프로세스가 종료된 상태  
<br>

### 프로세스 제어 블록 (PCB, Process Control Block)
PCB는 프로세스의 정보를 저장하는 운영체제의 자료구조이다. **각 프로세스마다 독립적인 PCB를 가지고 있다.**  
프로세스는 한 번 CPU를 할당 받은 후, 한 번에 작업을 처리하지 못하고 다시 ready queue로 돌아가야할 상황이 발생한다. 
이때, 어디까지 실행했는 지 저장하기 위해서 PCB가 필요하다. 
<br>
### PCB의 구성 요소
- **프로세스 식별자(PID)**
- **프로세스 상태**
- **프로그램 카운터**: 다음에 실행할 명령어의 주소
- CPU 레지스터
- CPU 스케줄링 정보: 프로세스의 우선순위, 스케줄큐에 대한 포인터
<br><br>

## 스레드 
**스레드(Thread)**: 스레드는 프로세스의 실행 단위이다. 스레드는 **각각의 독립적인 스레드 식별자, 프로그램 카운터, 스택을 갖고있다.**  
모든 스레드는 **프로세스 내 코드, 데이터, 힙 영역의 자원을 공유한다.**

<br>

## 멀티 스레드 vs 멀티 프로세스
### 멀티 스레드
- 스레드끼리 **코드, 데이터, 힙 영역을 공유**하므로, 스레드간 통신에 들어가는 비용이 적다
- context switch의 경우, **cash memory를 비울 필요가 없어 문맥전환이 빠르다**
- 데이터, 힙 영역을 공유하므로, **공유 데이터에 대한 동기화 작업이 필요하다**<br>

### 멀티 프로세스
- 각 **프로세스가 독립적** -> 하나의 프로세스가 죽더라도 다른 프로세스에 영향을 주지 않는다
- 자원을 공유하지 않으므로, **프로세스간 통신에 들어가는 비용이 크다**
- context switch의 경우, cash memory를 비워야하므로 **문맥전환이 느리다**


